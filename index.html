<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>Polymer 3 PWA</title>
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@next/webcomponents-loader.js"></script>
    <style>
        counter-component {
            margin-top: 15px;
        }
    </style>
</head>
<script type="module">
    import {LitElement, html} from 'https://unpkg.com/@polymer/lit-element@0.6.2/lit-element.js?module';
    import {repeat} from 'https://unpkg.com/lit-html@0.12.0/directives/repeat.js?module';

    /**
     * logo-image component
     */
    class LogoComponent extends LitElement {
        constructor() {
            super();
            console.log('>>>logo-component:', this);
        }

        static get properties() {
            return {
                logourl: {type: String},
                imageurl: {type: String},
                imagealt: {type: String},
                imagetitle: {type: String}
            };
        }

        render() {
            return html`
                <style>
                    :host {
                        display: inline-block;
                    }

                    .LogoComponent {
                        display: block;
                    }

                    .LogoComponent-image {
                        display: block;
                    }
                </style>

                <a class="LogoComponent" href=${this.logourl}>
                    <img class="LogoComponent-image" src=${this.imageurl} alt=${this.imagealt} title=${this.imagetitle}>
                </a>
            `
        }
    }
    customElements.define('logo-component', LogoComponent);

    /**
     * Navigation Component
     */
    class NavigationComponent extends LitElement {
        constructor() {
            super();
        }

        static get properties() {
            return {
                items: {type: Array},
            };
        }

        render() {
            return html`
                <style>
                    :host {
                        display: inline-block;
                    }

                    .NavigationComponent {
                        display: flex;
                        flex-direction: row;
                        list-style-type: none;
                        margin-bottom: 0;
                        margin-top: 0;
                        padding-left: 0;
                        border: 1px solid #333;
                    }

                    .NavigationComponent-item:not(:last-child) {
                        border-right: 1px solid #333;
                    }

                    .NavigationComponent-link {
                        display: block;
                        padding: 10px 5px;
                        text-decoration: none;
                        color: #333;
                    }

                    .NavigationComponent-link:hover {
                        color: #fff;
                        background-color: #333;
                    }
                </style>

                <ul class="NavigationComponent">
                    ${repeat(this.items, i => i.label, i => html`
                        <li class="NavigationComponent-item">
                            <a class="NavigationComponent-link" href=${i.link}>
                                ${i.label}
                            </a>
                        </li>
                    `)}
                </ul>
            `
        }
    }
    customElements.define('navigation-component', NavigationComponent);

    /**
     * Custom Header Component
     */
    class CustomHeader extends LitElement {
        constructor() {
            super();
        }

        static get properties() {
            return {
                headerLogo: {type: Object},
                headerTitle: {type: String},
                headerNav: {type: Array}
            };
        }

        render() {
            return html`
                <style>
                    :host {
                        display: block;
                    }

                    .CustomHeader {
                        display: flex;
                        flex-direction: row;
                        align-items: center;
                        justify-content: space-between;
                        background-color: #eee;
                        border: 5px solid #ddd;
                    }
                </style>
                <header class="CustomHeader">
                    <logo-component
                        .logourl=${this.headerLogo.logourl}
                        .imageurl=${this.headerLogo.imageurl}
                        .imagealt=${this.headerLogo.imagealt}
                        .imagetitle=${this.headerLogo.imagetitle}
                    ></logo-component>

                    <h1>${this.headerTitle}</h1>

                    <navigation-component .items=${this.headerNav}></navigation-component>
                </header>
            `
        }
    }
    customElements.define('custom-header', CustomHeader);

    /**
     * PWA Card
     */
    class PwaCard extends LitElement {
        constructor() {
            super();
        }

        static get properties() {
            return {
                title: {type: String},
                description: {type: String},
                tags: {type: Array}
            };
        }

        render() {
            return html`
                <style>
                    :host {
                        display: block;
                    }

                    .Card {
                        padding: 15px;
                        border: 1px solid #000;

                        display: flex;
                        flex-direction: row-reverse;
                        flex-wrap: nowrap;
                        align-items: stretch;
                        justify-items: flex-end;
                    }

                    .Card_content {
                      flex-grow: 1;

                      display: flex;
                      flex-direction: column;
                      flex-wrap: nowrap;
                      justify-content: space-between;
                    }

                    .Card_contentTitle {
                      flex-grow: 0;
                      margin-top: 0;
                      margin-bottom: 0;
                    }

                    .Card_contentDescription {
                      flex-grow: 0;
                      margin-bottom: 0;
                      margin-top: 0;
                    }

                    .Card_contentList {
                      flex-grow: 0;
                      list-style-type: none;
                      padding-left: 0;
                      margin-bottom: 0;
                      margin-top: 0;

                      display: flex;
                      flex-direction: row;
                      flex-wrap: wrap;
                    }

                    .Card_contentList_title {
                        margin-top: 0;
                        margin-bottom: 0;
                        margin-right: 10px;
                        color: #ccc;
                    }

                    .Card_contentList_tag {
                        display: inline-block;
                        margin-right: 5px;
                        border: 1px solid #ccc;
                        border-radius: 3px;
                        color: #ccc;
                    }

                    .Card_contentFiller {
                      border: 0;
                      flex-grow: 1;
                    }

                    .Card_contentActionbar {
                      flex-grow: 0;
                      display: flex;
                      flex-direction: row-reverse;
                      flex-wrap: wrap-reverse;
                    }

                    .Card_image {
                      flex-shrink: 0;
                      width: 150px;
                      height: 150px;
                      margin-right: 15px;
                    }

                    .Card_image img {
                      width: 100%;
                      height: 100%;
                      object-position: center;
                      object-fit: cover;
                    }
                </style>

                <article class="Card">
                    <section class="Card_content">
                        <h3 class="Card_contentTitle">${this.title}</h3>
                        <p class="Card_contentDescription">${this.description}</p>
                        <ul class="Card_contentList">
                            <li><h4 class="Card_contentList_title">Tags:</h4></li>
                            <li><a class="Card_contentList_tag" href="#">bullet 1</a></li>
                            <li><a class="Card_contentList_tag" href="#">bullet 2</a></li>
                        </ul>
                        <hr class="Card_contentFiller">
                        <div class="Card_contentActionbar">
                            <button type="button" class="Button--c2a">Read more</button>
                        </div>
                    </section>
                    <picture class="Card_image">
                        <source srcset="https://picsum.photos/g/800/800, https://picsum.photos/g/1600/1600 2x" media="(min-width: 1200px)">
                        <img srcset="https://picsum.photos/g/200/200, https://picsum.photos/g/400/400 2x" alt="â€¦">
                    </picture>
                </article>
            `
        }
    }
    customElements.define('pwa-card', PwaCard);

    /**
     * Counter component
     */
    class CardList extends LitElement {
      constructor() {
        super();
        console.log('CardList', this);
        this.items = [{"title":"Card 1 title","description":"Lorem ipsum dolor sit amed description"},{"title":"Card 2 title","description":"Lorem ipsum gigi card deux v3 final"}];
      }

      static get properties() {
        return {
          data: {type: Array},
          items: {type: Array},
          title: {type: String},
        };
      }

      render() {
        return html`
          <style>
            :host {
              display: block;
              padding: 15px;
              background-color: #eee;
            }

            .NavigationComponent {
              list-style-type: none;
              padding-left: 0;
              margin-bottom: 0;
              margin-top: 0;
            }

            .NavigationComponent-item {
              margin-top: 15px;
            }
          </style>

          <h3>${this.title}</h3>
          <ul class="NavigationComponent">
            ${repeat(this.items, i => i.title, i => html`
              <li class="NavigationComponent-item">
                <pwa-card title="${i.title}" description="${i.description}"></pwa-card>
              </li>
            `)}
          </ul>
          `
      }
    }
    customElements.define('card-list', CardList);

</script>
<body>

    <custom-header headerTitle="Pied Piper PWA"></custom-header>

    <card-list title="List of articles and stuff..."></card-list>

    <script>
        /**
         * assign attributes (header-logo type stringified obj, header-nav type strigified arr of obj) to custom-header component
         */
        const customHeaderLogoData = {"logourl":"#","imageurl":"https://botw-pd.s3.amazonaws.com/styles/logo-thumbnail/s3/052016/untitled-1_183.png","imagealt":"Pied Piper logo","imagetitle":"Pied Piper"};
        document.querySelector('custom-header').headerLogo = customHeaderLogoData;

        const customHeaderNavData = [{"link":"http://google.com","label":"Google"},{"link":"#","label":"Yandex"},{"link":"#","label":"DuckDuckGo"}];
        document.querySelector('custom-header').headerNav = customHeaderNavData;

        const cardListData = [{"title":"Card 1 title","description":"Lorem ipsum dolor sit amed description"},{"title":"Card 2 title","description":"Lorem ipsum gigi card deux v3 final"}];
        document.querySelector('card-list').setAttribute('data', JSON.stringify(cardListData));
    </script>
</body>
</html>
